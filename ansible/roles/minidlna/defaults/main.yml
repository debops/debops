---
# .. vim: foldmarker=[[[,]]]:foldmethod=marker

# .. Copyright (C) 2021 Julien Lecomte <julien@lecomte.at>
# .. Copyright (C) 2021 DebOps <https://debops.org/>
# .. SPDX-License-Identifier: GPL-3.0-only

# .. _minidlna__ref_defaults:

# .. contents:: Sections
#    :local:
#
# .. include:: ../../../../includes/global.rst

# Packages and installation [[[
# -------------------------

# .. envvar:: minidlna__base_packages [[[
#
# List of APT packages to install for :command:`minidlna` support.
minidlna__base_packages: [ 'minidlna' ]

                                                                   # ]]]
# .. envvar:: minidlna__packages [[[
#
# List of additional APT packages to install during :command:`minidlna`
# configuration.
minidlna__packages: []

                                                                   # ]]]
                                                                   # ]]]
# MiniDLNA configuration [[[
# ----------------------

# .. envvar:: minidlna__http_port [[[
#
# Port for HTTP traffic. Defaults to 8200.
minidlna__http_port: 8200

                                                                   # ]]]
# .. envvar:: minidlna__media_dirs [[[
#
# List of media directories to scan and present to end user.
#
# If you want to restrict a media_dir to a specific content type, you can
# prepend the directory name with a letter representing the type (A, P or V),
# followed by a comma, as so:
#
# * "A" for audio    (eg. "A,/var/lib/minidlna/music")
# * "P" for pictures (eg. "P,/var/lib/minidlna/pictures")
# * "V" for video    (eg. "V,/var/lib/minidlna/videos")
# * "PV" for pictures and video (eg. "PV,/var/lib/minidlna/digital_camera")
#
minidlna__media_dirs: []

                                                                   # ]]]
# .. envvar:: minidlna__default_configuration [[[
#
# YAML dictionary of {name, value} for configuration file.
minidlna__default_configuration:
  - name: "inotify"
    value: "yes"
                                                                   # ]]]
# .. envvar:: minidlna__configuration [[[
#
# YAML dictionary of {name, value} for configuration file.
minidlna__configuration: []

                                                                   # ]]]
# .. envvar:: minidlna__default_album_art_names [[[
#
# List of file names to look for when searching for album art.
# Names should be delimited with a forward slash ("/").
minidlna__default_album_art_names:
  - "Cover.jpg/cover.jpg/AlbumArtSmall.jpg/albumartsmall.jpg"
  - "AlbumArt.jpg/albumart.jpg/Album.jpg/album.jpg"
  - "Folder.jpg/folder.jpg/Thumb.jpg/thumb.jpg"
                                                                   # ]]]
# .. envvar:: minidlna__album_art_names [[[
#
# List of file names to look for when searching for album art.
# Names should be delimited with a forward slash ("/").
minidlna__album_art_names: []

                                                                   # ]]]
# .. envvar:: minidlna__allow [[[
#
# List of IP addresses or CIDR subnets which are allowed to connect to the
# MiniDLNA instances over the network, on all hosts in the Ansible
# inventory. This variable configures the firewall for all instances at the
# same time, for individual instance configuration you should modify the
# :envvar:`minidlna__ferm__dependent_rules` variable directly.
minidlna__allow: []

                                                                   # ]]]
                                                                   # ]]]
# Configuration for other Ansible roles [[[
# -------------------------------------

# .. envvar:: minidlna__ferm__dependent_rules [[[
#
# Configuration for the :ref:`debops.ferm` Ansible role.
minidlna__ferm__dependent_rules:

  - name: 'minidlna_allow_tcp'
    type: 'accept'
    dport: [ "{{ minidlna__http_port }}" ]
    protocol: [ 'tcp' ]
    saddr: '{{ minidlna__allow }}'
    weight: '50'
    by_role: 'debops.minidlna'

  - name: 'minidlna_allow_udp'
    type: 'accept'
    dport: [ 1900 ]
    protocol: [ 'udp' ]
    saddr: '{{ minidlna__allow }}'
    weight: '50'
    by_role: 'debops.minidlna'
                                                                   # ]]]
# .. envvar:: minidlna_server__etc_services__dependent_list [[[
#
# Configuration for the :ref:`debops.etc_services` Ansible role.
minidlna_server__etc_services__dependent_list:

  - name: 'ssdp'
    port: '1900'
    comment: 'Simple Service Discovery Protocol'

  - name: 'minidlna'
    port: '{{ minidlna__http_port }}'
    comment: 'MiniDLNA Server'

                                                                   # ]]]
# .. envvar:: minidlna__combined_configuration [[[
#
# Cofiguration merged into one.
minidlna__combined_configuration: '{{ minidlna__default_configuration
                                      + minidlna__configuration }}'
                                                                   # ]]]
# .. envvar:: minidlna__combined_album_art_names [[[
#
# Album art configuration merged into one.
minidlna__combined_album_art_names: '{{ minidlna__default_album_art_names
                                      + minidlna__album_art_names }}'
                                                                   # ]]]
                                                                   # ]]]
